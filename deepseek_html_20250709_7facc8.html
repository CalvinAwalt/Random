<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Stock Analysis System</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --quantum-dark: #0c0f1d;
            --finance-blue: #1a3a8a;
            --growth-green: #2ecc71;
            --risk-red: #e74c3c;
            --market-gold: #f1c40f;
            --text-light: #f0f0f0;
            --text-dim: #a0aec0;
        }
        
        body {
            background: radial-gradient(circle at center, var(--quantum-dark), #000);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }
        
        /* Financial background elements */
        .market-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }
        
        .stock-particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, var(--growth-green), transparent);
            opacity: 0.7;
            filter: blur(2px);
        }
        
        .risk-particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, var(--risk-red), transparent);
            opacity: 0.5;
            filter: blur(1px);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(15, 20, 40, 0.8);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(26, 58, 138, 0.3);
            border: 1px solid rgba(46, 204, 113, 0.3);
            position: relative;
            z-index: 20;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--growth-green), var(--market-gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
            letter-spacing: 2px;
        }
        
        .subtitle {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto 20px;
            color: var(--text-dim);
            line-height: 1.6;
        }
        
        .universe {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .universe {
                grid-template-columns: 1fr;
            }
        }
        
        .formula-section {
            background: rgba(20, 25, 45, 0.85);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(46, 204, 113, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .formula-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(46, 204, 113, 0.05) 0%, transparent 70%);
            z-index: -1;
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--growth-green);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::after {
            content: '';
            flex: 1;
            height: 2px;
            background: linear-gradient(90deg, var(--growth-green), transparent);
            margin-left: 15px;
        }
        
        .current-formula {
            font-size: 1.6rem;
            min-height: 120px;
            padding: 20px;
            background: rgba(10, 15, 30, 0.6);
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid rgba(46, 204, 113, 0.1);
            overflow-x: auto;
            transition: all 0.5s ease;
        }
        
        .formula-history {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(10, 15, 30, 0.6);
            border-radius: 15px;
            border: 1px solid rgba(46, 204, 113, 0.1);
        }
        
        .history-item {
            padding: 10px;
            border-bottom: 1px solid rgba(46, 204, 113, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .history-item:hover {
            background: rgba(46, 204, 113, 0.1);
        }
        
        .ticker {
            background: rgba(26, 58, 138, 0.5);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .metrics-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .metric-card {
            background: rgba(20, 25, 45, 0.85);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(46, 204, 113, 0.2);
            position: relative;
        }
        
        .metric-title {
            font-size: 1.2rem;
            color: var(--text-dim);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--growth-green), var(--market-gold));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-align: center;
            margin: 10px 0;
        }
        
        .metric-description {
            font-size: 0.9rem;
            color: var(--text-dim);
            text-align: center;
        }
        
        .trend-up {
            color: var(--growth-green);
        }
        
        .trend-down {
            color: var(--risk-red);
        }
        
        .visualization-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .visualization-section {
                grid-template-columns: 1fr;
            }
        }
        
        .visualization {
            height: 500px;
            background: rgba(20, 25, 45, 0.85);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(46, 204, 113, 0.2);
            overflow: hidden;
            padding: 15px;
        }
        
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .control-group {
            background: rgba(20, 25, 45, 0.85);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(46, 204, 113, 0.2);
        }
        
        .control-title {
            font-size: 1.2rem;
            color: var(--growth-green);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .slider-container {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-dim);
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            background: linear-gradient(90deg, var(--growth-green), var(--risk-red));
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            background: var(--market-gold);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(241, 196, 15, 0.8);
        }
        
        .value-display {
            text-align: center;
            font-size: 1.4rem;
            font-weight: 600;
            margin-top: 5px;
            color: var(--market-gold);
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            background: linear-gradient(135deg, var(--finance-blue), var(--growth-green));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 25px rgba(26, 58, 138, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(46, 204, 113, 0.6);
        }
        
        .footer {
            text-align: center;
            padding: 30px;
            color: var(--text-dim);
            font-size: 0.9rem;
        }
        
        /* Animation for formula evolution */
        @keyframes formula-evolve {
            0% { transform: scale(0.95); opacity: 0.5; }
            50% { transform: scale(1.02); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .evolving {
            animation: formula-evolve 0.8s ease;
        }
        
        /* Stock list */
        .stock-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .stock-card {
            background: rgba(30, 35, 55, 0.7);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(46, 204, 113, 0.2);
            transition: all 0.3s ease;
        }
        
        .stock-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(46, 204, 113, 0.3);
        }
        
        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .stock-name {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .stock-ticker {
            background: rgba(26, 58, 138, 0.7);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .stock-price {
            font-size: 2.2rem;
            text-align: center;
            margin: 15px 0;
            font-weight: 700;
        }
        
        .stock-change {
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .stock-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }
        
        .metric {
            background: rgba(15, 20, 40, 0.6);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
        }
        
        .metric-label {
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-bottom: 5px;
        }
        
        .metric-value {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .recommendation {
            display: flex;
            justify-content: center;
            margin-top: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            padding: 8px;
            border-radius: 8px;
        }
        
        .buy {
            background: rgba(46, 204, 113, 0.2);
            color: var(--growth-green);
        }
        
        .hold {
            background: rgba(241, 196, 15, 0.2);
            color: var(--market-gold);
        }
        
        .sell {
            background: rgba(231, 76, 60, 0.2);
            color: var(--risk-red);
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="market-bg" id="marketCanvas"></div>
    
    <div class="container">
        <header>
            <h1>Quantum Stock Analysis System</h1>
            <p class="subtitle">A tensor-based algorithmic trading platform using quantum mathematics for predictive market analysis</p>
        </header>
        
        <div class="universe">
            <div class="formula-section">
                <h2 class="section-title"><i class="fas fa-calculator"></i> Current Analysis Formula</h2>
                <div class="current-formula" id="currentFormula">
                    $$P_{target} = \frac{MA(50) + \beta \cdot (R_{market} - R_f) \cdot \sigma_{stock}}{PE_{forward} \cdot \sqrt{t}}$$
                </div>
                
                <h2 class="section-title"><i class="fas fa-history"></i> Analysis History</h2>
                <div class="formula-history" id="formulaHistory">
                    <div class="history-item">
                        <div class="ticker">AAPL</div>
                        <div>$$Score = \frac{ROE \cdot Growth}{Volatility}$$</div>
                    </div>
                    <div class="history-item">
                        <div class="ticker">MSFT</div>
                        <div>$$Value = EPS \times (1 + g)^t \times \frac{P}{E_{sector}}$$</div>
                    </div>
                </div>
            </div>
            
            <div class="formula-section">
                <h2 class="section-title"><i class="fas fa-project-diagram"></i> Tensor Analysis</h2>
                <div class="current-formula" id="evolutionProcess">
                    $$\mathcal{T} = \alpha \otimes \beta \otimes \gamma = \begin{bmatrix} PE \\ PB \\ PS \end{bmatrix} \otimes \begin{bmatrix} Growth \\ Margin \\ ROIC \end{bmatrix} \otimes \begin{bmatrix} Momentum \\ Volatility \\ Sentiment \end{bmatrix}$$
                </div>
                
                <h2 class="section-title"><i class="fas fa-infinity"></i> Predictive Recursion</h2>
                <div class="current-formula">
                    $$Pred_{n+1} = \frac{d^{\alpha}}{dt^{\alpha}} \left( MA(n) \oplus \beta \cdot (Pred_n - Actual) \right)$$
                </div>
            </div>
        </div>
        
        <div class="metrics-section">
            <div class="metric-card">
                <div class="metric-title"><i class="fas fa-brain"></i> Model Accuracy</div>
                <div class="metric-value">87.3%</div>
                <div class="metric-description">Prediction accuracy over last 90 days</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title"><i class="fas fa-chart-line"></i> Portfolio Growth</div>
                <div class="metric-value">24.8%</div>
                <div class="metric-description">Annualized return</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title"><i class="fas fa-skull"></i> Risk Factor</div>
                <div class="metric-value">0.32</div>
                <div class="metric-description>Portfolio volatility (0-1 scale)</div>
            </div>
            
            <div class="metric-card">
                <div class="metric-title"><i class="fas fa-bolt"></i> Alpha Generation</div>
                <div class="metric-value">Δ³+</div>
                <div class="metric-description">Market outperformance index</div>
            </div>
        </div>
        
        <div class="visualization-section">
            <div class="visualization" id="correlationGraph">
                <h3 style="text-align: center; margin-bottom: 15px;">Stock Correlation Matrix</h3>
                <canvas id="correlationChart"></canvas>
            </div>
            <div class="visualization" id="performanceChart">
                <h3 style="text-align: center; margin-bottom: 15px;">Portfolio Performance</h3>
                <canvas id="performanceCanvas"></canvas>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <div class="control-title">Analysis Parameters</div>
                <div class="slider-container">
                    <label for="riskTolerance"><i class="fas fa-chess-knight"></i> Risk Tolerance</label>
                    <input type="range" id="riskTolerance" min="1" max="10" value="6">
                    <div class="value-display" id="riskDisplay">6</div>
                </div>
                
                <div class="slider-container">
                    <label for="timeHorizon"><i class="fas fa-hourglass-half"></i> Time Horizon (Years)</label>
                    <input type="range" id="timeHorizon" min="1" max="10" value="5">
                    <div class="value-display" id="horizonDisplay">5</div>
                </div>
                
                <div class="slider-container">
                    <label for="growthFocus"><i class="fas fa-seedling"></i> Growth Focus</label>
                    <input type="range" id="growthFocus" min="0" max="1" step="0.1" value="0.7">
                    <div class="value-display" id="growthDisplay">0.7</div>
                </div>
            </div>
            
            <div class="control-group">
                <div class="control-title">Market Parameters</div>
                <div class="slider-container">
                    <label for="marketVolatility"><i class="fas fa-wind"></i> Market Volatility</label>
                    <input type="range" id="marketVolatility" min="0" max="1" step="0.01" value="0.35">
                    <div class="value-display" id="volatilityDisplay">0.35</div>
                </div>
                
                <div class="slider-container">
                    <label for="interestRate"><i class="fas fa-percentage"></i> Interest Rate</label>
                    <input type="range" id="interestRate" min="0" max="10" step="0.1" value="4.5">
                    <div class="value-display" id="interestDisplay">4.5%</div>
                </div>
                
                <div class="slider-container">
                    <label for="inflationRate"><i class="fas fa-fire"></i> Inflation Rate</label>
                    <input type="range" id="inflationRate" min="0" max="10" step="0.1" value="3.2">
                    <div class="value-display" id="inflationDisplay">3.2%</div>
                </div>
            </div>
            
            <div class="control-group">
                <div class="control-title">System Controls</div>
                <div class="buttons">
                    <button id="analyzeBtn"><i class="fas fa-cogs"></i> Analyze Market</button>
                    <button id="optimizeBtn"><i class="fas fa-sync-alt"></i> Optimize Portfolio</button>
                    <button id="scanBtn"><i class="fas fa-search-dollar"></i> Scan Opportunities</button>
                </div>
                <div class="buttons">
                    <button id="valueBtn"><i class="fas fa-balance-scale"></i> Value Strategy</button>
                    <button id="growthBtn"><i class="fas fa-chart-line"></i> Growth Strategy</button>
                    <button id="quantumBtn"><i class="fas fa-atom"></i> Quantum Analysis</button>
                </div>
            </div>
        </div>
        
        <div class="formula-section">
            <h2 class="section-title"><i class="fas fa-coins"></i> Top Stock Recommendations</h2>
            <div class="stock-list" id="stockList">
                <!-- Stock cards will be generated here -->
            </div>
        </div>
        
        <div class="footer">
            <p>Quantum Stock Analysis System • Algorithmic Trading Platform • Powered by Tensor Mathematics</p>
        </div>
    </div>

    <script>
        // Initialize market background
        function initMarketBackground() {
            const container = document.getElementById('marketCanvas');
            const particleCount = 150;
            
            for (let i = 0; i < particleCount; i++) {
                // Create stock particles (green)
                const stockParticle = document.createElement('div');
                stockParticle.className = 'stock-particle';
                const size = Math.random() * 8 + 2;
                stockParticle.style.width = `${size}px`;
                stockParticle.style.height = `${size}px`;
                stockParticle.style.left = `${Math.random() * 100}%`;
                stockParticle.style.top = `${Math.random() * 100}%`;
                stockParticle.style.animation = `pulse ${3 + Math.random() * 7}s infinite alternate`;
                container.appendChild(stockParticle);
                
                // Create risk particles (red)
                const riskParticle = document.createElement('div');
                riskParticle.className = 'risk-particle';
                const riskSize = Math.random() * 5 + 1;
                riskParticle.style.width = `${riskSize}px`;
                riskParticle.style.height = `${riskSize}px`;
                riskParticle.style.left = `${Math.random() * 100}%`;
                riskParticle.style.top = `${Math.random() * 100}%`;
                riskParticle.style.animation = `drift ${10 + Math.random() * 20}s linear infinite`;
                container.appendChild(riskParticle);
            }
            
            // Add CSS for animations
            const style = document.createElement('style');
            style.textContent = `
                @keyframes pulse {
                    0% { opacity: 0.2; transform: scale(1); }
                    100% { opacity: 0.8; transform: scale(1.5); }
                }
                
                @keyframes drift {
                    0% { transform: translate(0, 0); }
                    100% { transform: translate(${Math.random() * 200 - 100}px, ${Math.random() * 200 - 100}px); }
                }
            `;
            document.head.appendChild(style);
        }
        
        // Stock data
        const stocks = [
            {
                name: "Apple Inc.",
                ticker: "AAPL",
                price: 189.25,
                change: 2.35,
                changePercent: 1.26,
                pe: 29.8,
                pb: 38.2,
                dividend: 0.58,
                beta: 1.2,
                sector: "Technology",
                recommendation: "buy"
            },
            {
                name: "Microsoft Corp.",
                ticker: "MSFT",
                price: 340.54,
                change: -1.25,
                changePercent: -0.37,
                pe: 35.6,
                pb: 12.8,
                dividend: 0.75,
                beta: 0.9,
                sector: "Technology",
                recommendation: "buy"
            },
            {
                name: "Amazon.com Inc.",
                ticker: "AMZN",
                price: 134.95,
                change: 3.45,
                changePercent: 2.62,
                pe: 62.4,
                pb: 8.3,
                dividend: 0.0,
                beta: 1.1,
                sector: "Consumer Cyclical",
                recommendation: "hold"
            },
            {
                name: "Tesla Inc.",
                ticker: "TSLA",
                price: 248.50,
                change: 12.75,
                changePercent: 5.41,
                pe: 68.9,
                pb: 15.2,
                dividend: 0.0,
                beta: 2.0,
                sector: "Automotive",
                recommendation: "buy"
            },
            {
                name: "Johnson & Johnson",
                ticker: "JNJ",
                price: 157.80,
                change: -0.85,
                changePercent: -0.54,
                pe: 25.3,
                pb: 5.8,
                dividend: 4.28,
                beta: 0.6,
                sector: "Healthcare",
                recommendation: "hold"
            },
            {
                name: "Exxon Mobil Corp.",
                ticker: "XOM",
                price: 105.34,
                change: -2.10,
                changePercent: -1.95,
                pe: 10.2,
                pb: 2.1,
                dividend: 3.68,
                beta: 1.3,
                sector: "Energy",
                recommendation: "sell"
            }
        ];
        
        // Initialize market background
        initMarketBackground();
        
        // Update value displays
        function updateDisplays() {
            document.getElementById('riskDisplay').textContent = 
                document.getElementById('riskTolerance').value;
            document.getElementById('horizonDisplay').textContent = 
                document.getElementById('timeHorizon').value;
            document.getElementById('growthDisplay').textContent = 
                parseFloat(document.getElementById('growthFocus').value).toFixed(1);
            document.getElementById('volatilityDisplay').textContent = 
                parseFloat(document.getElementById('marketVolatility').value).toFixed(2);
            document.getElementById('interestDisplay').textContent = 
                parseFloat(document.getElementById('interestRate').value).toFixed(1) + "%";
            document.getElementById('inflationDisplay').textContent = 
                parseFloat(document.getElementById('inflationRate').value).toFixed(1) + "%";
        }
        
        // Render stock cards
        function renderStocks() {
            const stockList = document.getElementById('stockList');
            stockList.innerHTML = '';
            
            stocks.forEach(stock => {
                const card = document.createElement('div');
                card.className = 'stock-card';
                
                const changeClass = stock.change >= 0 ? 'trend-up' : 'trend-down';
                const changeSign = stock.change >= 0 ? '+' : '';
                
                card.innerHTML = `
                    <div class="stock-header">
                        <div class="stock-name">${stock.name}</div>
                        <div class="stock-ticker">${stock.ticker}</div>
                    </div>
                    <div class="stock-price">$${stock.price.toFixed(2)}</div>
                    <div class="stock-change ${changeClass}">${changeSign}${stock.change.toFixed(2)} (${changeSign}${stock.changePercent.toFixed(2)}%)</div>
                    <div class="chart-container">
                        <canvas id="chart-${stock.ticker}"></canvas>
                    </div>
                    <div class="stock-metrics">
                        <div class="metric">
                            <div class="metric-label">P/E Ratio</div>
                            <div class="metric-value">${stock.pe.toFixed(1)}</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Dividend Yield</div>
                            <div class="metric-value">${stock.dividend.toFixed(2)}%</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Beta</div>
                            <div class="metric-value">${stock.beta.toFixed(1)}</div>
                        </div>
                        <div class="metric">
                            <div class="metric-label">Sector</div>
                            <div class="metric-value">${stock.sector}</div>
                        </div>
                    </div>
                    <div class="recommendation ${stock.recommendation}">
                        <i class="fas fa-${stock.recommendation === 'buy' ? 'arrow-up' : stock.recommendation === 'sell' ? 'arrow-down' : 'pause'}"></i>
                        ${stock.recommendation.toUpperCase()} RECOMMENDATION
                    </div>
                `;
                
                stockList.appendChild(card);
                
                // Render stock chart
                setTimeout(() => {
                    renderStockChart(stock.ticker);
                }, 100);
            });
        }
        
        // Render stock chart
        function renderStockChart(ticker) {
            const ctx = document.getElementById(`chart-${ticker}`).getContext('2d');
            const stock = stocks.find(s => s.ticker === ticker);
            const basePrice = stock.price - stock.change * 5;
            
            const data = [];
            for (let i = 0; i < 30; i++) {
                // Generate realistic stock price fluctuations
                const fluctuation = (Math.random() - 0.5) * stock.beta * 4;
                const prevPrice = i === 0 ? basePrice : data[i-1];
                data.push(prevPrice + fluctuation);
            }
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 30}, (_, i) => i + 1),
                    datasets: [{
                        label: `${ticker} Price`,
                        data: data,
                        borderColor: stock.change >= 0 ? '#2ecc71' : '#e74c3c',
                        backgroundColor: stock.change >= 0 ? 'rgba(46, 204, 113, 0.1)' : 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            display: false
                        }
                    }
                }
            });
        }
        
        // Initialize correlation matrix chart
        function initCorrelationChart() {
            const ctx = document.getElementById('correlationChart').getContext('2d');
            
            // Sample correlation data
            const tickers = ['AAPL', 'MSFT', 'AMZN', 'TSLA', 'JNJ', 'XOM'];
            const data = [
                [1.00, 0.85, 0.78, 0.65, 0.32, 0.15],
                [0.85, 1.00, 0.82, 0.60, 0.40, 0.20],
                [0.78, 0.82, 1.00, 0.70, 0.35, 0.25],
                [0.65, 0.60, 0.70, 1.00, 0.15, 0.10],
                [0.32, 0.40, 0.35, 0.15, 1.00, 0.55],
                [0.15, 0.20, 0.25, 0.10, 0.55, 1.00]
            ];
            
            new Chart(ctx, {
                type: 'matrix',
                data: {
                    datasets: [{
                        label: 'Correlation',
                        data: data.flatMap((row, i) => 
                            row.map((value, j) => ({x: tickers[j], y: tickers[i], v: value}))
                        ),
                        backgroundColor: function(context) {
                            const value = context.dataset.data[context.dataIndex].v;
                            const alpha = Math.abs(value) * 0.7 + 0.3;
                            return value > 0 ? 
                                `rgba(46, 204, 113, ${alpha})` : 
                                `rgba(231, 76, 60, ${alpha})`;
                        },
                        borderWidth: 0,
                        width: ({chart}) => (chart.chartArea.width / 6) - 1,
                        height: ({chart}) => (chart.chartArea.height / 6) - 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            callbacks: {
                                title: () => '',
                                label: (context) => {
                                    const data = context.dataset.data[context.dataIndex];
                                    return `${data.x} vs ${data.y}: ${data.v.toFixed(2)}`;
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            type: 'category',
                            labels: tickers,
                            offset: true,
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            type: 'category',
                            labels: [...tickers].reverse(),
                            offset: true,
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize performance chart
        function initPerformanceChart() {
            const ctx = document.getElementById('performanceCanvas').getContext('2d');
            
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const portfolioData = [100, 102, 105, 108, 112, 115, 118, 122, 125, 130, 134, 140];
            const benchmarkData = [100, 101, 103, 105, 107, 109, 110, 112, 114, 116, 118, 120];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [
                        {
                            label: 'Portfolio',
                            data: portfolioData,
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            borderWidth: 3,
                            pointRadius: 0,
                            tension: 0.3,
                            fill: true
                        },
                        {
                            label: 'Benchmark (S&P 500)',
                            data: benchmarkData,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 2,
                            pointRadius: 0,
                            tension: 0.3,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#f0f0f0'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0aec0'
                            }
                        },
                        y: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#a0aec0',
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Initialize controls
        document.getElementById('riskTolerance').addEventListener('input', updateDisplays);
        document.getElementById('timeHorizon').addEventListener('input', updateDisplays);
        document.getElementById('growthFocus').addEventListener('input', updateDisplays);
        document.getElementById('marketVolatility').addEventListener('input', updateDisplays);
        document.getElementById('interestRate').addEventListener('input', updateDisplays);
        document.getElementById('inflationRate').addEventListener('input', updateDisplays);
        
        document.getElementById('analyzeBtn').addEventListener('click', analyzeMarket);
        document.getElementById('optimizeBtn').addEventListener('click', optimizePortfolio);
        document.getElementById('scanBtn').addEventListener('click', scanOpportunities);
        document.getElementById('valueBtn').addEventListener('click', valueStrategy);
        document.getElementById('growthBtn').addEventListener('click', growthStrategy);
        document.getElementById('quantumBtn').addEventListener('click', quantumAnalysis);
        
        function analyzeMarket() {
            const formulaElement = document.getElementById('currentFormula');
            formulaElement.classList.add('evolving');
            
            setTimeout(() => {
                const formulas = [
                    `P_{target} = \\frac{MA(50) + \\beta \\cdot (R_{market} - R_f) \\cdot \\sigma_{stock}}{PE_{forward} \\cdot \\sqrt{t}}`,
                    `Score = \\frac{ROE \\cdot Growth \\cdot Momentum}{Volatility \\cdot Debt\\ Ratio}`,
                    `Alpha = (1 + \\frac{ROIC - WACC}{WACC}) \\times \\sqrt{Volume_{30d}}`,
                    `Value = \\int_0^t EPS(t) \\cdot e^{-r\\tau} d\\tau + \\frac{Terminal}{e^{rt}}`,
                    `Signal = \\frac{d}{dt}(RSI(14)) + \\nabla (MACD) - \\Delta Volatility`
                ];
                
                const randomFormula = formulas[Math.floor(Math.random() * formulas.length)];
                document.getElementById('currentFormula').innerHTML = `$${randomFormula}$`;
                
                // Update metrics
                document.querySelectorAll('.metric-value')[0].textContent = (85 + Math.random() * 5).toFixed(1) + '%';
                document.querySelectorAll('.metric-value')[1].textContent = (20 + Math.random() * 10).toFixed(1) + '%';
                document.querySelectorAll('.metric-value')[2].textContent = (0.3 + Math.random() * 0.1).toFixed(2);
                
                MathJax.typeset();
                formulaElement.classList.remove('evolving');
            }, 800);
        }
        
        function optimizePortfolio() {
            alert("Portfolio optimization completed! New allocation based on quantum tensor analysis.");
            
            // Randomly update stock recommendations
            stocks.forEach(stock => {
                const rand = Math.random();
                stock.recommendation = rand > 0.7 ? "buy" : rand > 0.4 ? "hold" : "sell";
            });
            
            renderStocks();
        }
        
        function scanOpportunities() {
            alert("Market scan complete! Quantum analysis has identified new opportunities.");
            
            // Randomly update stock prices to simulate market movement
            stocks.forEach(stock => {
                const change = (Math.random() - 0.5) * 10;
                stock.change = change;
                stock.changePercent = (change / stock.price) * 100;
                stock.price += change;
            });
            
            renderStocks();
        }
        
        function valueStrategy() {
            document.getElementById('currentFormula').innerHTML = `$$Value = \\frac{EBIT}{EV} \\times \\sqrt{ROIC} \\times \\frac{1}{\\sigma}$$`;
            MathJax.typeset();
            
            // Update metrics to value-focused
            document.getElementById('growthFocus').value = 0.3;
            updateDisplays();
        }
        
        function growthStrategy() {
            document.getElementById('currentFormula').innerHTML = `$$Growth = \\frac{\\Delta Revenue}{\\Delta Time} \\times \\frac{Gross\\ Margin}{R\\&D\\ Intensity}$$`;
            MathJax.typeset();
            
            // Update metrics to growth-focused
            document.getElementById('growthFocus').value = 0.9;
            updateDisplays();
        }
        
        function quantumAnalysis() {
            document.getElementById('currentFormula').innerHTML = `$$\\Psi(Stock) = \\int_{-\\infty}^{\\infty} e^{iS(price)/\\hbar} \\mathcal{D}[price]$$`;
            MathJax.typeset();
            
            // Update metrics to quantum mode
            document.querySelectorAll('.metric-value')[3].textContent = "Δ⁴";
        }
        
        // Initialize displays
        updateDisplays();
        renderStocks();
        
        // Initialize charts
        setTimeout(() => {
            initCorrelationChart();
            initPerformanceChart();
        }, 500);
    </script>
</body>
</html>